"use strict";(function a(){function b(a){try{return a instanceof HTMLElement}catch(b){return"object"==typeof a&&1===a.nodeType&&"object"==typeof a.style&&"object"==typeof a.ownerDocument}}if(chrome.runtime.lastError)return console.warn(chrome.runtime.lastError.message),void setTimeout(a,1e3);const c=window.location;c.pathname.startsWith("/user/")?extendUserPage():c.pathname.startsWith("/status")?extendStatusPage():c.pathname.startsWith("/group/list")?extendGroupListPage():c.pathname.startsWith("/group/member/")?extendGroupMemberPage():c.pathname.startsWith("/board/")?extendBoardPage():c.pathname.startsWith("/vs/")?extendVs():function(a){return a.startsWith("/my/files")||a.startsWith("/modify")||a.startsWith("/password/change")||a.startsWith("/setting/")||a.startsWith("/support")}(c.pathname)&&extendSettingPage(),extendTheme(),extendWide(),function(){function a(a){for(let b=0;3>b;++b){if(a.classList.contains("result-text"))return a;a=a.parentNode}return null}function c(a,b){const c=new MutationObserver(function(a){a.forEach(function(a){b(a.target)})});c.observe(a,{attributes:!0,childList:!0,characterData:!0,subtree:!0})}function d(a,b){a.parentNode.appendChild(b);const c=Utils.createElement("span",{class:"result-latest",style:"float: right;color: #dd4124;"});a.parentNode.appendChild(c)}function e(a,c){b(a.firstChild)&&a.firstChild.getAttribute("href")&&(a=a.firstChild),a.innerHTML=c}function f(a,b){let c=(a.getAttribute("class")||"").split(" ");if(c=c.filter(a=>"result-text"!=a&&a.startsWith("result-")),1>c.length)return;const d=c[0],f=a.innerText,g=a.closest("td");Config.load(d,c=>{if(!c)g&&g.setAttribute("class","result"),a.style.display="",b.style.display="none";else{g&&g.setAttribute("class","result has-fake"),a.style.display="none",b.style.display="";const d=(f.match(/[+-]?\d+(\.\d+)?/g)||[""])[0],h=":number:";if(-1!==c.indexOf(h))e(b,c.replaceAll(h,d));else if(""!==d){const a=(f.match(/Ï†ê|%/)||[""])[0],g=c.lastIndexOf("</");e(b,c.substring(0,g)+" ("+d+a+")"+c.substring(g,c.length))}else e(b,c)}});const h=a.closest("tr").id,i=g.querySelector(".result-latest");i.innerText=!a.classList.contains("result-ac")&&window.bojextStatusHistories&&void 0!==window.bojextStatusHistories[h]?"("+window.bojextStatusHistories[h]+"%)":""}async function g(a,b){const c=JSON.parse(localStorage.getItem(Constants.STORAGE_STATUS_HISTORY)||"{}"),d=100==b||c[a]!=b;100==b?delete c[a]:c[a]=Math.max(c[a]||0,b),d&&(localStorage.setItem(Constants.STORAGE_STATUS_HISTORY,JSON.stringify(c)),window.bojextStatusHistories=c)}Config.load(Constants.CONFIG_SHOW_STATUS_HISTORY,b=>{b=false!==b,b&&(window.bojextStatusHistories=JSON.parse(localStorage.getItem(Constants.STORAGE_STATUS_HISTORY)||"{}")),document.querySelectorAll("span[class^=result-]").forEach(e=>{const h=document.createElement("span");h.setAttribute("class","result-fake-text"),h.appendChild(e.firstChild.cloneNode(!0));const i=a(e);null===i?d(e,h):(d(i,h),c(i,a=>{const c=a.querySelector("span")||a;if(c.classList.contains("result-judging")){const a=c.closest("tr").id,d=parseInt(c.innerText.match(/\d+/))||null;b&&null!==d&&g(a,d)}f(c,h)})),f(e,h)})})}(),extendProblemPage()})();