(function(){window.addEventListener("DOMContentLoaded",function(){applyTheme(null,localStorage.getItem("systemTheme")),Config.load(Constants.CONFIG_THEME,function(a){applyTheme(null,a)})})})();function extendTheme(){function a(a){Config.save(Constants.CONFIG_THEME,a,b)}function b(a){applyTheme(j,a)}function c(){return f.hasAttribute(k)}function d(a){a?f.setAttribute(k,!0):f.removeAttribute(k)}const e=Utils.createElement("li",{class:"theme-selector"}),f=Utils.createElement("div",{class:"theme-dropdown"}),g=Utils.createElement("ul",{class:"theme-ul"}),h=Object.keys(Constants.THEMES)||[];for(const b of h){const c=Utils.createElement("li",{class:"theme-li"});c.innerText=Constants.THEMES[b],c.addEventListener("click",function(c){c.preventDefault(),a(b)}),g.appendChild(c)}const j=document.createElement("a");j.innerHTML="";for(let a=1;3>=a;++a)j.innerHTML+=`<div class="loading-bar bar-${a}"></div>`;j.addEventListener("click",function(a){a.preventDefault(),d(!c())}),document.addEventListener("click",function(a){a.target.closest(`.${e.className}`)||d(!1)}),f.appendChild(g),e.appendChild(j),e.appendChild(f),addElementToBar(e),Config.load(Constants.CONFIG_THEME,b);const k="data-dropdown"}function applyTheme(a,b){setTimeout(function(){a&&(a.innerText=Constants.THEMES[b])},100),"auto"==b&&(b=getThemeBySystem(),setTimeout(detectDarkmode,100)),document.body.parentNode.setAttribute("theme",b)}function detectDarkmode(){const a=window.matchMedia("(prefers-color-scheme: dark)");setThemeBySystem(a),a.addEventListener("change",setThemeBySystem)}function getThemeBySystem(a){a=a||window.matchMedia("(prefers-color-scheme: dark)");const b=!!a.matches;return b?"dark":"light"}function setThemeBySystem(a){const b=getThemeBySystem(a);applyTheme(null,b),localStorage.setItem("systemTheme",b)}